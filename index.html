<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Data Staf</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    table { border-collapse: collapse; width: 100%; margin-top: 10px; }
    th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
    th { background-color: #f4f4f4; }
    #search { margin-bottom: 10px; padding: 5px; width: 300px; }
  </style>
</head>
<body>
  <h2>Senarai Staf</h2>
  <input type="text" id="search" placeholder="Cari nama staf...">
  <table id="dataTable"></table>

  <script>
    const sheetId = "1uFVEYip6WQEOUugGXA48QkqqweU2dnFj7cFZaSqwvBM";
    const apiKey = "AIzaSyDZ_H2MYtZHrAdxLGxYNUwrUcXUJRrrS34";
    const range = "ALL!A1:C50";

    async function loadData() {
      const url = `https://sheets.googleapis.com/v4/spreadsheets/${sheetId}/values/${range}?key=${apiKey}`;
      const res = await fetch(url);
      const data = await res.json();

      const values = data.values;
      if (!values) return;

      // buat table
      let table = "<tr>";
      values[0].forEach(h => { table += `<th>${h}</th>`; });
      table += "</tr>";

      for (let i = 1; i < values.length; i++) {
        table += "<tr>";
        values[i].forEach(v => { table += `<td>${v}</td>`; });
        table += "</tr>";
      }

      document.getElementById("dataTable").innerHTML = table;
    }

    // search filter
    document.getElementById("search").addEventListener("keyup", function() {
      let filter = this.value.toLowerCase();
      let rows = document.querySelectorAll("#dataTable tr");
      rows.forEach((row, i) => {
        if (i === 0) return; // skip header
        let text = row.innerText.toLowerCase();
        row.style.display = text.includes(filter) ? "" : "none";
      });
    });

    loadData();
  </script>
</body>
</html>
